<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Circle Slider</title>
  </head>
  <body>
    <div class="slideshowx">
      <div class="carouselx">
        <div class="slidex active">
          <img src="images/food-img-1.png" />
        </div>
        <div class="slidex">
          <img src="images/food-img-2.png" />
        </div>
        <div class="slidex">
          <img src="images/food-img-3.png" />
        </div>
        <div class="slidex">
          <img src="images/food-img-4.png" />
        </div>
      </div>
      <div class="controlsx">
        <a href="#" data-index="1" class="active">
          <img src="images/control-img-1.png" />
        </a>
        <a href="#" data-index="2">
          <img src="images/control-img-2.png" />
        </a>
        <a href="#" data-index="3">
          <img src="images/control-img-3.png" />
        </a>
        <a href="#" data-index="4">
          <img src="images/control-img-4.png" />
        </a>
      </div>
    </div>
  </body>
  <script>
    const carousel = document.querySelector(".carouselx");
    const slides = document.querySelectorAll(".slidex");
    const controlLinks = document.querySelectorAll(".controlsx a");

    let i = 0,
      j = 1,
      intervalId;

    const intervalFn = () => {
      intervalId = setInterval(() => {
        carousel.style.rotate = `-${++i * 90}deg`;

        document.querySelector(".slidex.active").classList.remove("active");
        const activeSlide = document.querySelector(`.slidex:nth-child(${++j})`);
        activeSlide.classList.add("active");

        document.querySelector("a.active").classList.remove("active");
        const activeLink = document.querySelector(
          `.controlsx a:nth-child(${j})`
        );
        activeLink.classList.add("active");

        j === 4 && (j = 0);
      }, 4000);
    };

    intervalFn();

    controlLinks.forEach((control) => {
      control.addEventListener("click", () => {
        clearInterval(intervalId);
        carousel.style.rotate = `-${
          (i - j + Number(control.dataset.index)) * 90
        }deg`;

        document.querySelector(".slidex.active").classList.remove("active");
        const activeSlide = document.querySelector(
          `.slidex:nth-child(${control.dataset.index})`
        );
        activeSlide.classList.add("active");

        document.querySelector("a.active").classList.remove("active");
        control.classList.add("active");
      });
    });

    carousel.addEventListener("mouseenter", () => {
      clearInterval(intervalId);
      console.log("Pause");
    });

    carousel.addEventListener("mouseleave", () => {
      intervalFn();
      console.log("Play");
    });
  </script>
</html>
